# .codereview/scala-security-review.yaml
name: "Common - Security Review"
mode: "diff"
branch: "main"
event: "merge"
target: "**/*.java,**/*.scala,**/*.conf,**/*.properties,**/*.yaml"
model: "claude3.5-sonnet"

system: |
business: |
  Code review context: Common (Scala/JS/Python).
  Review scope: diffs from this commit.
requirement: |
  Tasks:
  - Evaluate whether the code introduces concurrency issues or fails to handle high-concurrency scenarios gracefully (e.g., race conditions, shared mutable state, lack of synchronization, blocking operations). If no issues are found, output []
  
  Output format requirements (strictly follow):
  - Output only two tags: <output> and <thought>
  - <output> contains a valid JSON array with the following structure:
    [
      {
        "title": "Summary in Chinese and English, less than 30 words, no quotes and backslashes",
        "content": "Description in Chinese and English, no quotes and backslashes; must explain why it's incorrect, provide evidence; include incorrect code and improved code snippets in markdown code blocks",
        "filepath": "File path @ line number range, no quotes and backslashes"
      }
    ]
  - JSON must properly escape quotes, backslashes, etc. inside JSON value fields; outside <output> tag, no need to escape newlines
  - <thought> describes your reasoning process and which guidelines were violated
order: "business,requirement"

